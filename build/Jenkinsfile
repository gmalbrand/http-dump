pipeline {
    agent none

    stages {
        stage('Go : Download modules') {
          agent {
            docker {
              label 'docker'
              image 'golang:1.19.3-alpine'
            }
          }
          steps {
            dir("${env.WORKSPACE}/src"){
              sh 'go mod download'
              sh 'go build -o http-dump main.go'
            }
          }
        }
    }
}
