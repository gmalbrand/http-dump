pipeline {
    agent any
    tools {
      go 'go-1.19.3'
    }
    stages {
        stage('Go : Download modules') {
          steps {
            dir("${env.WORKSPACE}/src"){
              sh 'go mod download'
            }
          }
        }
        stage('Go : build executable') {
          steps{
            dir("${env.WORKSPACE}/src"){
              sh 'go build -o http-dump main.go'
            }
          }
        }
        stage('List files') {
          steps {
              sh 'echo $PWD'
              sh 'echo "$(ls -lR)"'
          }
        }
    }
}
