pipeline {
    agent none

    stages {
        stage('Build & Tests') {
          agent {
            docker {
              label 'docker'
              image 'golang:1.19.3-alpine'
              args '-e GOCACHE=/tmp'
            }
          }
          steps {
            dir("${env.WORKSPACE}/src"){
              sh 'go build -o http-dump main.go'
            }
          }
        }
    }
}
